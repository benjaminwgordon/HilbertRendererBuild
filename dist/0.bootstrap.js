(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg/hilbert_wasm_renderer.js":
/*!***************************************!*\
  !*** ../pkg/hilbert_wasm_renderer.js ***!
  \***************************************/
/*! exports provided: __wbg_set_wasm, hilbert_coordinates, __wbg_newwithlength_9e47bf496e7c6f07, __wbg_setindex_eb56bef33ba12d87, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _hilbert_wasm_renderer_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hilbert_wasm_renderer_bg.wasm */ \"../pkg/hilbert_wasm_renderer_bg.wasm\");\n/* harmony import */ var _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hilbert_wasm_renderer_bg.js */ \"../pkg/hilbert_wasm_renderer_bg.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbg_set_wasm\", function() { return _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbg_set_wasm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"hilbert_coordinates\", function() { return _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"hilbert_coordinates\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbg_newwithlength_9e47bf496e7c6f07\", function() { return _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbg_newwithlength_9e47bf496e7c6f07\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbg_setindex_eb56bef33ba12d87\", function() { return _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbg_setindex_eb56bef33ba12d87\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return _hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbindgen_throw\"]; });\n\n\n\nObject(_hilbert_wasm_renderer_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbg_set_wasm\"])(_hilbert_wasm_renderer_bg_wasm__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\n//# sourceURL=webpack:///../pkg/hilbert_wasm_renderer.js?");

/***/ }),

/***/ "../pkg/hilbert_wasm_renderer_bg.js":
/*!******************************************!*\
  !*** ../pkg/hilbert_wasm_renderer_bg.js ***!
  \******************************************/
/*! exports provided: __wbg_set_wasm, hilbert_coordinates, __wbg_newwithlength_9e47bf496e7c6f07, __wbg_setindex_eb56bef33ba12d87, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_set_wasm\", function() { return __wbg_set_wasm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hilbert_coordinates\", function() { return hilbert_coordinates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_newwithlength_9e47bf496e7c6f07\", function() { return __wbg_newwithlength_9e47bf496e7c6f07; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_setindex_eb56bef33ba12d87\", function() { return __wbg_setindex_eb56bef33ba12d87; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\nlet wasm;\nfunction __wbg_set_wasm(val) {\n    wasm = val;\n}\n\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n* @param {number} n\n* @param {number} p\n* @returns {Uint32Array}\n*/\nfunction hilbert_coordinates(n, p) {\n    const ret = wasm.hilbert_coordinates(n, p);\n    return takeObject(ret);\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction __wbg_newwithlength_9e47bf496e7c6f07(arg0) {\n    const ret = new Uint32Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nfunction __wbg_setindex_eb56bef33ba12d87(arg0, arg1, arg2) {\n    getObject(arg0)[arg1 >>> 0] = arg2 >>> 0;\n};\n\nfunction __wbindgen_throw(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../www/node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))\n\n//# sourceURL=webpack:///../pkg/hilbert_wasm_renderer_bg.js?");

/***/ }),

/***/ "../pkg/hilbert_wasm_renderer_bg.wasm":
/*!********************************************!*\
  !*** ../pkg/hilbert_wasm_renderer_bg.wasm ***!
  \********************************************/
/*! exports provided: memory, hilbert_coordinates */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./hilbert_wasm_renderer_bg.js */ \"../pkg/hilbert_wasm_renderer_bg.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/hilbert_wasm_renderer_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var hilbert_wasm_renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hilbert_wasm_renderer */ \"../pkg/hilbert_wasm_renderer.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_utils_BufferGeometryUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/utils/BufferGeometryUtils */ \"./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js\");\n\n\n\n\n// Global variables\nlet n = 3;\nlet p = 3;\nlet rotation = 0;\nlet pipeThickness = 0.2;\nlet geometryType = \"square\";\n\nlet camera;\nconst scene = new three__WEBPACK_IMPORTED_MODULE_1__[\"Scene\"]();\nconst renderer = new three__WEBPACK_IMPORTED_MODULE_1__[\"WebGLRenderer\"]({\n  antialias: true,\n});\n\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setClearColor(new three__WEBPACK_IMPORTED_MODULE_1__[\"Color\"](0x000000));\nrenderer.setPixelRatio(window.devicePixelRatio);\n\ndocument.body.appendChild(renderer.domElement);\n\nfunction render() {\n  // clear any prior geometry\n  clearScene(scene);\n\n  camera = new three__WEBPACK_IMPORTED_MODULE_1__[\"PerspectiveCamera\"](\n    70,\n    window.innerWidth / window.innerHeight,\n    0.1,\n    1000\n  );\n\n  const hilbert_flat_buffer = hilbert_wasm_renderer__WEBPACK_IMPORTED_MODULE_0__[\"hilbert_coordinates\"](n, p);\n  const hilbertVectors = unflattenHilbertVectors(hilbert_flat_buffer);\n\n  const roundedGeometry = new three__WEBPACK_IMPORTED_MODULE_1__[\"CapsuleGeometry\"](pipeThickness, 1, 2);\n  const squareGeometry = new three__WEBPACK_IMPORTED_MODULE_1__[\"BoxGeometry\"](\n    pipeThickness,\n    1 + pipeThickness,\n    pipeThickness\n  );\n  const pipeGeometry =\n    geometryType == \"round\" ? roundedGeometry : squareGeometry;\n\n  // create a correctly rotated capsule geometry and use it like a prefab\n  const pipeMaterial = new three__WEBPACK_IMPORTED_MODULE_1__[\"MeshPhongMaterial\"]({ color: 0xaaaaaa });\n  pipeGeometry.rotateX(1.5708);\n  pipeGeometry.rotateZ(1.5708);\n\n  const geometries = [];\n  for (let i = 1; i < hilbertVectors.length; i++) {\n    const lineInGeometry = pipeGeometry.clone();\n    const previousVertex =\n      i == 0 ? new three__WEBPACK_IMPORTED_MODULE_1__[\"Vector3\"](0, 0, 0) : hilbertVectors[i - 1];\n    const lineInDirection = hilbertVectors[i]\n      .clone()\n      .sub(previousVertex)\n      .normalize();\n    lineInGeometry.lookAt(lineInDirection);\n    lineInGeometry.translate(\n      hilbertVectors[i].x - lineInDirection.x * 0.5,\n      hilbertVectors[i].y - lineInDirection.y * 0.5,\n      hilbertVectors[i].z - lineInDirection.z * 0.5\n    );\n    geometries.push(lineInGeometry);\n  }\n\n  const hilbertGeometries = Object(three_examples_jsm_utils_BufferGeometryUtils__WEBPACK_IMPORTED_MODULE_2__[\"mergeGeometries\"])(geometries);\n  const hilbertMeshes = new three__WEBPACK_IMPORTED_MODULE_1__[\"Mesh\"](hilbertGeometries, pipeMaterial);\n  hilbertMeshes.geometry.center();\n  scene.add(hilbertMeshes);\n\n  const lightOne = new three__WEBPACK_IMPORTED_MODULE_1__[\"DirectionalLight\"](0x00ffff, 0.5);\n  const lightTwo = new three__WEBPACK_IMPORTED_MODULE_1__[\"DirectionalLight\"](0x00ff00, 0.4);\n  const lightThree = new three__WEBPACK_IMPORTED_MODULE_1__[\"DirectionalLight\"](0xff00ff, 0.5);\n  const lightFour = new three__WEBPACK_IMPORTED_MODULE_1__[\"DirectionalLight\"](0xff0000, 0.5);\n\n  lightOne.position.set(0, -1, 0);\n  lightTwo.position.set(0, 1, 0);\n  lightThree.position.set(-1, 0, 0);\n  lightFour.position.set(1, 0, 0);\n\n  for (const light of [lightOne, lightTwo, lightThree, lightFour]) {\n    scene.add(light);\n  }\n\n  const ambientLight = new three__WEBPACK_IMPORTED_MODULE_1__[\"AmbientLight\"](0xffffff, 0.1);\n  scene.add(ambientLight);\n}\n\n//document.getElementById(\"renderSubmit\").onclick = render;\n\nrender();\n\nfunction animate(obj) {\n  requestAnimationFrame(animate);\n  // throw the camera in a gentle ellipse around model center\n  rotation += 0.006;\n  camera.position.x = Math.sin(rotation) * 2 ** p * 1.5;\n  camera.position.y = 2 ** p;\n  camera.position.z = Math.cos(rotation) * 2 ** p * 1.2;\n  camera.lookAt(scene.position);\n  renderer.render(scene, camera);\n}\nanimate();\n\nfunction clearScene(scene) {\n  while (scene.children.length > 0) {\n    scene.remove(scene.children[0]);\n  }\n}\n\nfunction unflattenHilbertVectors(hilbertFlatBuffer) {\n  const hilbertVectors = [];\n  for (let i = 0; i < hilbertFlatBuffer.length; i += 3) {\n    hilbertVectors.push(\n      new three__WEBPACK_IMPORTED_MODULE_1__[\"Vector3\"](\n        hilbertFlatBuffer[i],\n        hilbertFlatBuffer[i + 1],\n        hilbertFlatBuffer[i + 2]\n      )\n    );\n  }\n  return hilbertVectors;\n}\n\n// global setters\nconst updateN = (newGeometryTypeIs3D) => {\n  n = newGeometryTypeIs3D ? 3 : 2;\n  render();\n};\nconst updateGeometryType = (newGeometryTypeIsSquare) => {\n  geometryType = newGeometryTypeIsSquare ? \"square\" : \"round\";\n  render();\n};\nfunction updateP(newP) {\n  p = newP;\n  render();\n}\nconst updatePipeThickness = (newPipeThickness) => {\n  // pipe thickness is specified as integers, but is actually thousands of a unit\n  pipeThickness = newPipeThickness / 1000;\n  render();\n};\n\n// attach setters\ndocument.getElementById(\"isGeometry3D\").onclick = (e) =>\n  updateN(e.target.checked);\ndocument.getElementById(\"isGeometrySquare\").onclick = (e) =>\n  updateGeometryType(e.target.checked);\n\ndocument.getElementById(\"pInput\").onchange = (e) => updateP(e.target.value);\ndocument.getElementById(\"pipeThicknessInput\").onchange = (e) =>\n  updatePipeThickness(e.target.value);\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);